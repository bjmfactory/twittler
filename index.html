<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment.min.js"></script>
  </head>
  <body>
    <div id="menu">
      <p>Twittler</p>
      <button id="refresh">Refresh</button>
    </div>
    <div id="content">
      <h1>Home</h1>
      <p># of Tweets: <span id="tweetCount"></span></p>
      <div id="tweets">

    <script>

      $(document).ready(function(){
        var stream = streams.home;
        var index = stream.length - 1;
        var $tweets = $('#tweets');

        var showTweets = function(index) {
          $tweets.html('');
          while(index >= 0){
            var tweet = stream[index];
            var $tweet = $('<div class="tweet"></div>');
            $tweet.html('<p class="user">@' + tweet.user + '</p>' + '<p class="message">' + tweet.message + '</p>'  + '<p class="timestamp">' + tweet.created_at + '</p>' );
            $tweet.appendTo($tweets);
          index -= 1;
          }
        };

        var showTweetCount = function(stream){
          $("#tweetCount").text(stream.length);
        }

        var refreshIndex = function(stream){
          index = stream.length - 1;
        }

        var setStream = function(newStream){
          stream = newStream;
        }

        showTweets(index);
        showTweetCount(stream);

        $("button#refresh").click(function(){
          refreshIndex(stream);
          showTweets(index);
          showTweetCount(stream);
        });

        $tweets.on("click", "p.user", function(){
          alert($(this).text());
        });
      });

      /*
      Idea for linking to other profiles.

      var index = streams.CLICKED_USERNAME.length - 1;

      while(index >= 0) {
        var tweet = streams.CLICKED_USERNAME[index];
        $tweet.html('<p class="user">@' + tweet.user + ' ' + '<span class="timestamp">' + tweet.created_at + '</span></p>' + '<p class="message">' +tweet.message + '</p>');
        $tweet.appendTo($content);
        index -= 1;
      }

      Also update the H1 $('#content') to CLICKED_USERNAME

      You can the text of the paragraph clicked, but you'll have to strip out the "@"
      */

    </script>
      </div>
    </div>
  </body>
</html>
